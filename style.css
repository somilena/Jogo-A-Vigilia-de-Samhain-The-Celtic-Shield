/* Importando fontes temáticas */
@import url("https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Merriweather:wght@300;400;700&display=swap");

/* --- VARIÁVEIS DE COR --- */
:root {
  --dark-purple: #1a0f2b;
  --medium-purple: #3a2259;
  --light-purple: #5e437f;
  --text-light: #e0e0e0;
  --text-accent: #ffb74d; /* Dourado/laranja */
  --health-good: #2ecc71;
  --health-bad: #e74c3c;
  --spirit-glow-ancestor: #80deea; /* Brilho Azul */
  --spirit-glow-mischievous: #ff7043; /* Brilho Laranja/Roxo */
}

/* --- CONFIGURAÇÕES GERAIS --- */
body {
  /* Mantém o degradê de fundo roxo escuro */
  background-color: var(--dark-purple);
  background-image: linear-gradient(
    to bottom,
    var(--dark-purple) 0%,
    #000 100%
  );
  color: var(--text-light);
  font-family: "Merriweather", serif;
  text-align: center;
  margin: 0;
  padding: 0;
  min-height: 100vh; /* Garante que a página tenha altura total */
  position: relative; /* Base para o fixed do before */
}

/* --- LOGO DE FUNDO (MARCA D'ÁGUA) --- */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  /* Caminho da Imagem */
  background-image: url("/img/logo_guardiao_samhain.jpg");
  background-repeat: no-repeat;
  background-position: center center;
  background-size: contain;

  /* --- AJUSTES PARA FICAR VISÍVEL E MÍSTICO --- */
  opacity: 0.25; /* Aumenta a visibilidade (de 0.1 para 0.25) */
  filter: brightness(1.2) drop-shadow(0 0 10px rgba(255, 183, 77, 0.4)); /* Adiciona um brilho sutil */
  /* ------------------------------------------- */

  z-index: -1; /* Fica atrás de todo o conteúdo */
  pointer-events: none;
}

/* --- CABEÇALHO --- */
header {
  padding: 20px;
  width: 100%;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
  background-color: rgba(0, 0, 0, 0.3);
  border-bottom: 1px solid var(--medium-purple);
  box-sizing: border-box;
  position: relative;
  z-index: 10;
}
.header-content-samhain {
  padding: 30px 20px 10px 20px;
}
.titulo-samhain {
  font-family: "Cinzel Decorative", cursive;
  font-size: 3.5em;
  color: var(--text-accent);
  text-shadow: 0 0 10px rgba(255, 183, 77, 0.7),
    2px 2px 8px rgba(255, 170, 0, 0.7), -2px -2px 8px rgba(255, 170, 0, 0.7);
  margin: 0 0 10px 0;
}
.subtitulo-samhain {
  font-family: "Merriweather", serif;
  font-size: 1.5em;
  color: var(--text-light);
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
  margin-top: 0;
  font-style: italic;
}

/* --- LAYOUT PRINCIPAL (JOGO + DESAFIOS) --- */
.container {
  display: flex; /* Mantenha o flex para que as colunas fiquem lado a lado */
  width: 90%;
  max-width: 1400px;
  gap: 30px;
  margin: 20px auto 40px auto;
  position: relative;
  z-index: 5;
  /* ADICIONE/MANTENHA ESTAS DUAS LINHAS: */
  align-items: flex-start; /* Alinha no topo */
  /* height: auto; (Deixamos 'auto' por padrão) */
}
.game-area {
  flex: 2;
  background-color: var(--medium-purple);
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 0 25px rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative; /* Para os overlays */
}

/* --- INFORMAÇÕES DO JOGO (UI) --- */
#game-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  max-width: 100%;
  font-size: 1.3em;
  margin-bottom: 15px;
  background-color: rgba(0, 0, 0, 0.3);
  padding: 10px 15px;
  border-radius: 8px;
  border: 1px solid var(--light-purple);
  box-sizing: border-box;
}

#timer-container {
  font-family: "Cinzel Decorative", cursive;
  font-size: 1.1em; /* (Um pouco maior que o texto normal) */
  color: var(--text-accent);
  text-shadow: 0 0 5px var(--text-accent);
}

#health-container {
  font-family: "Cinzel Decorative", cursive;
  font-size: 1.1em;
  color: var(--text-light);
  text-shadow: 0 0 5px var(--text-light);
  display: flex; /* Para alinhar o texto e a barra */
  align-items: center;
  gap: 10px; /* Espaçamento entre "Luz do Fogo:" e a barra */
}

#health-bar-wrapper {
  /* Novo elemento para a base da barra */
  width: 150px; /* Largura total da barra */
  height: 20px; /* Altura da barra */
  background-color: rgba(0, 0, 0, 0.5); /* Fundo escuro */
  border: 2px solid var(--text-light); /* Borda para destaque */
  border-radius: 10px; /* Bordas arredondadas */
  overflow: hidden; /* Garante que a barra interna não vaze */
  position: relative; /* Para posicionar o brilho/pulsação */
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.3); /* Um brilho suave */
}

#health-bar {
  height: 100%;
  width: 100%; /* Começa com 100% preenchido no CSS, o JS ajusta */
  background: linear-gradient(
    to right,
    #ff0000,
    #ffa500,
    #ffff00
  ); /* Degradê vibrante */
  transition: width 0.2s ease-out, background-color 0.4s ease-out,
    filter 0.4s ease-out; /* Transições suaves */
  filter: brightness(1.2); /* Brilho inicial */
  transform-origin: left; /* Garante que a barra diminua da direita para a esquerda */
}

/* Animações de brilho/pulsação para a barra */
@keyframes health-pulse-high {
  0%,
  100% {
    filter: brightness(1.2) drop-shadow(0 0 5px rgba(255, 255, 0, 0.7));
  }
  50% {
    filter: brightness(1.5) drop-shadow(0 0 10px rgba(255, 255, 0, 0.9));
  }
}

@keyframes health-pulse-medium {
  0%,
  100% {
    filter: brightness(1.1) drop-shadow(0 0 3px rgba(255, 165, 0, 0.5));
  }
  50% {
    filter: brightness(1.3) drop-shadow(0 0 8px rgba(255, 165, 0, 0.7));
  }
}

@keyframes health-pulse-low {
  0%,
  100% {
    filter: brightness(1) drop-shadow(0 0 2px rgba(255, 0, 0, 0.3));
  }
  50% {
    filter: brightness(1.2) drop-shadow(0 0 6px rgba(255, 0, 0, 0.5));
  }
}

/* --- CONTAINER DO JOGO --- */
#game-container {
  width: 100%;
  aspect-ratio: 16 / 10;
  max-width: 1000px;
  background-color: #000;
  border: 3px solid var(--light-purple);
  border-radius: 10px;
  position: relative;
  overflow: hidden;
  background-image: radial-gradient(
    circle at center,
    var(--medium-purple) 0%,
    var(--dark-purple) 60%,
    #000 90%
  );
  box-shadow: inset 0 0 120px 30px rgba(0, 0, 0, 0.9),
    0 0 30px rgba(0, 0, 0, 0.8);
  cursor: none; /* Esconde o cursor do mouse */
}

/* --- FOGO SAGRADO (COM IMAGEM) --- */
/* Z-INDEX CORRIGIDO: 5 */
#hearth {
  position: absolute;
  width: 80px;
  height: 80px;
  background-image: url("/img/fogo.gif");
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  top: 50%;
  left: 50%;

  /* O JS controla o 'transform' com a vida */
  transform: translate(-50%, -50%);

  /* A transição suave para o tamanho */
  transition: all 0.2s ease-out;

  /* ADICIONE ESTA LINHA DE VOLTA: */
  animation: pulse-fire-image 1.5s infinite alternate ease-in-out;

  z-index: 5;
}

/* --- ESPÍRITOS (COM IMAGEM) --- */
/* Z-INDEX CORRIGIDO: 8 */
.spirit {
  position: absolute;
  width: 55px;
  height: 55px;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  opacity: 0.9;
  z-index: 8; /* Fica na frente do fogo */
}
.ancestor {
  background-image: url("/img/doguinho_fantasma.gif");
  border-radius: 50%; /* Faz o contêiner do brilho ser circular */
  box-shadow: 0 0 10px var(--text-light), 0 0 20px var(--spirit-glow-ancestor);
}

.mischievous {
  /* <<< SUA IMAGEM DO COELHO MAU AQUI >>> */
  background-image: url("/img/coelho_mau.gif");
  border-radius: 50%; /* Faz o contêiner do brilho ser circular */
  box-shadow: 0 0 10px var(--health-bad),
    0 0 20px var(--spirit-glow-mischievous);
}

/* --- ESCUDO CELTA (COM IMAGEM) --- */
/* Z-INDEX CORRIGIDO: 10 */
#shield {
  position: absolute;
  width: 70px;
  height: 70px;
  /* <<< SUA IMAGEM DO ESCUDO AQUI >>> */
  background-image: url("/img/escudo-celta.jpg");
  background-size: contain;
  background-repeat: no-repeat;
  filter: drop-shadow(0 0 8px var(--spirit-glow-ancestor));
  z-index: 10; /* Fica na frente de TUDO */
}

/* --- BOTÃO (Feedback) --- */
#bonfire-button {
  margin-top: 25px;
  padding: 18px 35px;
  font-family: "Cinzel Decorative", cursive;
  font-size: 1.2em;
  background: var(--medium-purple);
  color: var(--text-light);
  filter: grayscale(1) brightness(0.6);
  border: none;
  border-radius: 8px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

/* --- TELAS DE OVERLAY GERAIS --- */
.fullscreen-overlay,
#game-over-screen,
#game-win-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  /* --- CORREÇÃO AQUI: Fundo 100% opaco --- */
  background-color: var(--dark-purple); /* (Era 0.98, agora é 100% opaco) */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 100;
  color: var(--text-light);
  font-family: "Cinzel Decorative", cursive;
  padding: 20px;
  box-sizing: border-box;
}
/* (Game-over e Game-win estão dentro de 'game-area', então voltam a ser 'absolute') */
#game-over-screen,
#game-win-screen {
  position: absolute;
  background-color: rgba(12, 10, 26, 0.95);
}

/* Tela de Como Jogar */
#how-to-play-screen {
  display: flex; /* (Corrigido para garantir que está visível) */
}
#how-to-play-screen h2 {
  font-size: 3.5em;
  color: var(--text-accent);
  text-shadow: 0 0 15px rgba(255, 183, 77, 0.8);
  margin-bottom: 20px;
}
#how-to-play-screen p {
  font-family: "Merriweather", serif;
  font-size: 1.2em;
  margin-bottom: 20px;
  max-width: 600px;
}
/* --- CORREÇÃO AQUI: Garantindo que o 'warning-text' funcione --- */
#how-to-play-screen .warning-text {
  font-family: "Cinzel Decorative", cursive;
  color: var(--health-bad) !important; /* Força a cor vermelha */
  font-size: 1.3em;
  margin-bottom: 10px;
  display: block; /* Garante que ele seja um bloco */
}
#how-to-play-screen .warning-subtext {
  margin-top: -10px;
}
#how-to-play-screen .instrucoes-lista {
  font-family: "Merriweather", serif;
  font-size: 1.1em;
  text-align: left;
  max-width: 550px;
  margin-bottom: 25px;
  list-style-position: inside;
  padding-left: 0;
}
/* --- CORREÇÃO AQUI: Alinhamento da lista (O BUG PRINCIPAL) --- */
#how-to-play-screen .instrucoes-lista li {
  margin-bottom: 15px;
  line-height: 1.5;
  display: flex;
  align-items: flex-start; /* Alinha o ícone ao TOPO do texto (não ao centro) */
  text-align: left; /* Garante que o texto quebre para a esquerda */
}
/* --- CORREÇÃO AQUI: Garantindo que o 'strong' funcione --- */
#how-to-play-screen .instrucoes-lista li strong {
  color: var(--text-accent) !important; /* Força a cor dourada */
  font-weight: 900; /* Deixa bem destacado */
}
.icon-help {
  width: 30px;
  height: 30px;
  margin-right: 10px;
  flex-shrink: 0; /* Impede o ícone de ser "espremido" */
}
.icon-card {
  width: 40px; /* A carta é um pouco maior */
  height: 60px; /* e mais alta */
  object-fit: contain; /* Garante que a imagem se ajuste sem cortar */
}
.icon-fire {
  width: 40px; /* Fogo um pouco maior */
  height: 40px;
  object-fit: contain;
}
/* --- FIM DAS NOVAS REGRAS --- */
.button-group {
  display: flex;
  gap: 20px;
}

.button-group {
  display: flex;
  gap: 20px;
}

/* Botões Verdes (Start/Restart) */
#start-game-button,
#restart-button,
#restart-button-win {
  margin-top: 20px;
  padding: 15px 30px;
  font-family: "Cinzel Decorative", cursive;
  font-size: 1.1em;
  cursor: pointer;
  background-color: #2ecc71;
  color: white;
  border: none;
  border-radius: 8px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
  transition: all 0.3s ease;
}
#start-game-button:hover,
#restart-button:hover,
#restart-button-win:hover {
  background-color: #27ae60;
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
}

/* Tela de Game Over */
#game-over-screen {
  display: none;
}
#game-over-screen h2 {
  font-size: 4em;
  color: var(--health-bad);
  text-shadow: 0 0 15px var(--health-bad);
  margin-bottom: 20px;
}
#game-over-screen p,
#game-win-screen p {
  font-family: "Merriweather", serif;
  font-size: 1.3em;
  margin-bottom: 10px;
}
#game-over-screen #final-score,
#game-win-screen #final-score-win {
  font-size: 1.8em;
  font-weight: bold;
  color: var(--text-accent);
  text-shadow: 0 0 8px var(--text-accent);
}

/* Tela de Vitória */
#game-win-screen {
  display: none;
}
#game-win-screen h2 {
  font-size: 3.5em; /* (Tamanho ajustado) */
  color: #fff;
  text-shadow: 0 0 20px #fff, 0 0 30px var(--spirit-glow-ancestor);
  margin-bottom: 20px;
}

/* --- SEÇÃO LATERAL (Direita) --- */
.explanation-area {
  flex: 1;
  background-color: rgba(0, 0, 0, 0.4);
  border: 1px solid var(--light-purple);
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 0 25px rgba(0, 0, 0, 0.5);
  text-align: left;
  max-height: 776px;
  display: flex;
  flex-direction: column;
}
.explanation-area h2 {
  font-family: "Cinzel Decorative", cursive;
  font-size: 2em;
  color: var(--text-accent);
  margin: 0 0 15px 0;
  text-shadow: 0 0 5px rgba(255, 183, 77, 0.5);
}

/* Painel de Desafios */
#challenge-panel {
  font-family: "Merriweather", serif;
  font-size: 1.1em;
  margin-bottom: 20px; /* Espaço entre desafios e história */
}
.challenge-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.challenge-list li {
  padding: 12px;
  margin-bottom: 10px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(0, 0, 0, 0.5);
  border-radius: 5px;
  transition: all 0.3s ease;
  opacity: 0.7;
  line-height: 1.4;
  font-weight: bold;
}
.challenge-list li.completed {
  opacity: 1;
  background: var(--health-good);
  color: var(--dark-purple);
  text-decoration: line-through;
}
.challenge-list li.completed .counter {
  color: var(--dark-purple);
  background: rgba(255, 255, 255, 0.3);
}
.counter {
  float: right;
  font-weight: bold;
  color: var(--text-accent);
  background: rgba(0, 0, 0, 0.4);
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 0.9em;
}

/* Painel de História (com scroll) */
#history-content {
  font-family: "Merriweather", serif;
  font-size: 0.95em;
  line-height: 1.6;
  flex-grow: 1; /* Ocupa o espaço restante */
  overflow-y: auto; /* ADICIONA SCROLL */
  padding-right: 15px;
  border-top: 1px solid var(--light-purple);
  padding-top: 15px;
}
#history-content h3 {
  font-family: "Cinzel Decorative", cursive;
  color: var(--text-accent);
  margin-top: 10px;
  margin-bottom: 5px;
}
#history-content p {
  margin-bottom: 10px;
}

/* --- ANIMAÇÕES --- */
@keyframes pulse-fire-image {
  from {
    filter: brightness(1);
  }
  to {
    filter: brightness(1.3) drop-shadow(0 0 10px var(--text-accent));
  }
}

/* --- RESPONSIVIDADE --- */
@media (max-width: 1050px) {
  /* (Pode manter 1050px) */
  .titulo-samhain {
    font-size: 2.5em;
  }
  .subtitulo-samhain {
    font-size: 1.2em;
  }
  #game-container {
    width: 100%;
    height: 50vh; /* (Era 400px) <<< MUDANÇA AQUI */
    aspect-ratio: unset; /* (Remove a proporção) */
  }
  #game-info {
    font-size: 1.1em;
    flex-direction: column;
    gap: 10px;
  }
  #health-bar-container {
    width: 100%;
  }
}
@media (max-width: 850px) {
  .titulo-samhain {
    font-size: 2.5em;
  }
  .subtitulo-samhain {
    font-size: 1.2em;
  }
  #game-container {
    width: 100%;
    height: 400px;
  }
  #game-info {
    font-size: 1.1em;
    flex-direction: column;
    gap: 10px;
  }
  #health-bar-container {
    width: 100%;
  }
}
@media (max-width: 500px) {
  .titulo-samhain {
    font-size: 2em;
  }
  .explanation-area h2 {
    font-size: 1.5em;
  }
  #game-over-screen h2,
  #game-win-screen h2,
  #how-to-play-screen h2 {
    font-size: 2.5em;
  }
  #history-content {
    font-size: 0.9em;
  }
  #game-info {
    font-size: 1em;
  }
}

/* --- EFEITOS DE PARTÍCULAS E COLISÃO --- */

/* Partícula de "Banir/Guiar" (Azul) */
.effect-particle {
  position: absolute;
  width: 8px;
  height: 8px;
  background: var(--spirit-glow-ancestor);
  border-radius: 50%;
  box-shadow: 0 0 10px var(--spirit-glow-ancestor);
  z-index: 20; /* Na frente de tudo */
  pointer-events: none; /* Não pode ser clicado */
  /* (A animação 'particle-explode' será adicionada abaixo) */
  animation: particle-explode 0.5s ease-out forwards;
}

/* Shockwave de "Dano/Falha" (Vermelho) */
.effect-shockwave {
  position: absolute;
  width: 20px;
  height: 20px;
  background: transparent;
  border: 3px solid var(--health-bad);
  border-radius: 50%;
  z-index: 20;
  pointer-events: none;
  /* (O JS vai centralizar, a animação faz o resto) */
  transform: translate(-50%, -50%) scale(0);
  animation: shockwave-fail 0.4s ease-out forwards;
}

/* --- ADICIONE ESSAS ANIMAÇÕES (junto com a @keyframes pulse-fire-image) --- */

/* Animação das partículas voando */
@keyframes particle-explode {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  100% {
    /* Usa as variáveis --dx e --dy do JS para direção aleatória */
    transform: translate(calc(var(--dx) - 50%), calc(var(--dy) - 50%)) scale(0);
    opacity: 0;
  }
}

/* Animação do anel de falha expandindo */
@keyframes shockwave-fail {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) scale(2.5);
    opacity: 0;
  }
}

/* --- ESTILO DO BOTÃO DE NARRATIVA (VERSÃO MAIS BONITA) --- */

.media-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 15px;
  margin-top: -10px;
  margin-bottom: 20px;
}

/* (Estilo base "Fantasma" para AMBOS os botões) */
.audio-button {
  font-family: "Merriweather", serif;
  font-weight: bold;

  /* 1. Visual "Fantasma" */
  background: transparent;
  border: 2px solid var(--light-purple);
  color: var(--light-purple);

  /* 2. Forma de Círculo */
  width: 50px;
  height: 50px;
  border-radius: 50%;

  cursor: pointer;
  transition: all 0.2s ease;

  /* 3. Correção de Bugs Visuais */
  outline: none; /* (Remove a borda "torta" do navegador) */
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); /* (Sombra sutil) */

  /* (Alinhamento do ícone/texto) */
  display: flex;
  justify-content: center;
  align-items: center;
  line-height: 1;
}
/* (Hover bonito) */
.audio-button:hover {
  background: var(--text-accent);
  border-color: var(--text-accent);
  color: var(--dark-purple);
  box-shadow: 0 0 15px var(--text-accent); /* (Efeito Glow) */
}

/* (Botão de Play/Pause Redondo) */
.play-pause-btn {
  font-size: 1.5em; /* Tamanho do '►' */
  /* (Empurra o '►' para o centro) */
  padding-left: 5px;
  box-sizing: border-box;
}
/* (Quando está tocando - 'playing') */
.play-pause-btn.playing {
  background: var(--health-bad);
  border-color: var(--health-bad);
  color: white;
  font-size: 1.2em; /* '■' é maior */
  padding-left: 0; /* Reseta o padding */
}

/* (Botão de Velocidade) */
.speed-btn {
  font-size: 1.1em;
  color: var(--text-accent); /* (Cor dourada por padrão) */
  border-color: var(--text-accent);
}
/* (Quando está rápido - 'fast') */
.speed-btn.fast {
  background: var(--text-accent);
  border-color: var(--text-accent);
  color: var(--dark-purple);
  font-weight: bold;
}

/* --- ESTILOS PARA O NOVO MENU DE HISTÓRIA --- */

/* (Alinha os botões 'Começar' e 'História' lado a lado) */
.button-group {
  display: flex;
  gap: 20px;
  justify-content: center;
}

/* (Estilo do botão roxo 'Ver História' / 'Voltar') */
.button-purple {
  margin-top: 20px;
  padding: 15px 30px;
  font-family: "Cinzel Decorative", cursive;
  font-size: 1.1em;
  cursor: pointer;
  background-color: var(--light-purple); /* Roxo */
  color: white;
  border: none;
  border-radius: 8px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
  transition: all 0.3s ease;
}
.button-purple:hover {
  background-color: var(--medium-purple);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
}

/* (Estilo da caixa de texto da história na tela cheia) */
#history-content-overlay {
  font-family: "Merriweather", serif;
  font-size: 1.1em;
  line-height: 1.7;
  max-width: 700px;
  max-height: 50vh; /* Limita a altura a 50% da tela */
  overflow-y: auto; /* Adiciona scroll SE precisar */
  padding: 10px 20px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  border: 1px solid var(--medium-purple);
  text-align: left;
  margin-top: 20px;
}
#history-content-overlay h3 {
  font-family: "Cinzel Decorative", cursive;
  color: var(--text-accent);
  margin-top: 20px;
  margin-bottom: 5px;
}
#history-content-overlay p {
  margin-bottom: 10px;
}

/* (Estilo do botão 'Ouvir' na tela cheia) */
#history-overlay-screen .audio-button {
  margin-top: 0;
  width: 90px; /* Um pouco maior */
}

/* --- ESTILOS DO NOVO RANKING --- */

/* (Botão de Limpar - Vermelho) */
.button-danger {
  margin-top: 20px;
  padding: 15px 30px;
  font-family: "Cinzel Decorative", cursive;
  font-size: 1.1em;
  cursor: pointer;
  background-color: var(--health-bad); /* Vermelho */
  color: white;
  border: none;
  border-radius: 8px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
  transition: all 0.3s ease;
}
.button-danger:hover {
  background-color: #c0392b; /* Vermelho mais escuro */
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
}

/* (Container da Tabela) */
.ranking-container {
  width: 100%;
  max-width: 600px;
  max-height: 50vh;
  overflow-y: auto;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--light-purple);
  border-radius: 8px;
}

.ranking-table {
  width: 100%;
  border-collapse: collapse;
  font-family: "Merriweather", serif;
}

.ranking-table th,
.ranking-table td {
  padding: 12px 15px;
  text-align: left;
}

/* (Cabeçalho da Tabela) */
.ranking-table thead {
  background-color: var(--medium-purple);
  font-family: "Cinzel Decorative", cursive;
  font-size: 1.2em;
  color: var(--text-accent);
}

/* (Corpo da Tabela) */
.ranking-table tbody tr {
  border-bottom: 1px solid var(--medium-purple);
}
.ranking-table tbody tr:nth-child(even) {
  background-color: rgba(0, 0, 0, 0.2); /* Linhas alternadas */
}
.ranking-table tbody tr:hover {
  background-color: var(--light-purple);
  color: #fff;
}

/* (Substitua as regras antigas por estas) */

.ranking-table td:nth-child(1) {
  /* Posição */
  width: 10%; /* (Era 15%) */
  text-align: center;
  font-weight: bold;
  color: var(--text-accent);
}
.ranking-table td:nth-child(2) {
  /* Nome */
  width: 40%; /* (Era 55%) */
  font-weight: bold;
}
.ranking-table td:nth-child(3) {
  /* Pontuação */
  width: 25%; /* (Era 30%) */
  font-weight: bold;
  color: var(--health-good);
}

/* --- ADICIONE ESTA NOVA REGRA --- */
.ranking-table td:nth-child(4) {
  /* Status */
  width: 25%;
  font-weight: bold;
}

/* --- ESTILO DOS BOTÕES ABAIXO DO JOGO (Layout Vertical) --- */
.bottom-button-group {
  display: flex;
  flex-direction: column; /* <<< MUDANÇA AQUI (agora é vertical) */
  gap: 15px; /* (Espaçamento entre os botões) */
  justify-content: center;
  align-items: center; /* (Centraliza os botões) */
  width: 100%;
  margin-top: 25px;
}

/* (Regra para o botão que já existia) */
#bonfire-button {
  width: 300px; /* (Define uma largura fixa) */
  box-sizing: border-box; /* (Garante que o padding não quebre a largura) */
  margin-top: 0; /* (O 'gap' do grupo agora cuida disso) */
}

/* (Regra para o novo botão de ranking) */
#show-ranking-button-ingame {
  margin-top: 0;
  font-size: 1.2em;
  padding: 18px 35px;
  width: 300px; /* (Mesma largura do botão de cima) */
  box-sizing: border-box;
}

/* --- ESTILOS DA TABELA DE RANKING (Status) --- */
.status-win {
  color: var(--health-good) !important;
  font-weight: bold;
}
.status-lose {
  color: var(--health-bad) !important;
  font-weight: bold;
}
/* --- ESTILO PARA A NOVA TELA DE SUPER DESAFIO (VERSÃO FINAL E MÍSTICA) --- */

#super-challenge-overlay {
  display: none;
  justify-content: center;
  align-items: center;
  position: absolute; /* Usamos ABSOLUTE para ficar dentro do Game Area */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.9); /* Fundo bem escuro */
  z-index: 100; /* Fica acima do jogo */
}

#super-challenge-overlay .overlay-content {
  /* Estilo Místico/Premium: Borda Dourada e Sombra Roxa */
  background-color: rgba(30, 10, 50, 0.98); /* Roxo escuro opaco */
  border: 4px solid var(--text-accent); /* Borda DOURADA DE DESTAQUE */
  border-radius: 15px;
  padding: 50px;
  color: var(--text-light);
  box-shadow: 0 0 30px rgba(255, 183, 77, 0.6); /* Grande brilho dourado/fogo */
  max-width: 650px;
  width: 90%;

  /* Organização Central */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 15px; /* Espaçamento padrão */
}

#super-challenge-overlay h2 {
  font-family: "Cinzel Decorative", cursive;
  font-size: 3.8em;
  color: #ffcc00; /* Dourado Vivo */
  margin-bottom: 10px;
  text-shadow: 0 0 10px #ffcc00;
}

#super-challenge-overlay p {
  font-family: "Merriweather", serif;
  font-size: 1.25em;
  line-height: 1.75; /* Aumenta o espaçamento entre linhas */
  margin: 0;
  max-width: 90%;
  text-align: center;
}

/* Frases de Destaque */
#super-challenge-overlay .challenge-question {
  font-family: "Cinzel Decorative", cursive;
  font-size: 1.6em;
  font-weight: bold;
  margin: 30px 0 10px 0;
  color: var(--text-accent); /* Dourado */
}

#super-challenge-overlay .challenge-goal {
  font-size: 1.4em;
  margin-bottom: 35px;
  color: var(--text-light);
}

#super-challenge-overlay .highlight-text {
  color: var(--health-bad); /* Vermelho forte para o número */
  font-weight: bold;
  text-shadow: 0 0 3px rgba(255, 0, 0, 0.5);
}

/* --- ESTILO DOS BOTÕES (LIMPO E SÓLIDO) --- */
#super-challenge-overlay .button-group {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 30px;
  width: 100%;
  flex-wrap: wrap;
}

#super-challenge-overlay button {
  padding: 15px 30px;
  font-size: 1.1em;
  font-family: "Cinzel Decorative", cursive;
  cursor: pointer;
  border-radius: 8px;
  transition: all 0.2s ease;
  border: none;
  font-weight: bold;
  min-width: 160px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
  color: white;
}

#accept-challenge-button {
  background-color: var(--health-good); /* Verde Vivo */
}
#accept-challenge-button:hover {
  background-color: #27ae60;
  transform: translateY(-2px);
}

#reject-challenge-button {
  background-color: var(--health-bad); /* Vermelho Vivo */
}
#reject-challenge-button:hover {
  background-color: #c0392b;
  transform: translateY(-2px);
}

/* Animação de entrada (pode ser reutilizada) */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(-30px) scale(0.9);
  } /* Começa mais "para cima" */
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* --- ESTILOS DO SUPER DESAFIO (VERSÃO CORRIGIDA) --- */

/* (Estilo do painel que SUBSTITUI os desafios normais) */
#super-challenge-display {
  font-family: "Merriweather", serif;
  font-size: 1.1em;
  margin-bottom: 20px; /* (Mantém o espaçamento) */
  padding: 12px;
  background: rgba(0, 0, 0, 0.3);
  border: 2px solid var(--text-accent); /* (Borda dourada para destacar) */
  border-radius: 5px;
  text-align: center; /* (Centraliza) */
  animation: pulse-border 1.5s infinite alternate; /* (Animação de pulso) */
}
#super-challenge-display h2 {
  font-family: "Cinzel Decorative", cursive;
  font-size: 1.5em; /* (Menor, para caber) */
  color: var(--text-accent);
  margin: 0 0 10px 0;
  text-shadow: 0 0 5px var(--text-accent);
}
#super-challenge-display p {
  font-family: "Merriweather", serif;
  font-size: 1em;
  margin: 0;
  font-weight: bold;
}
#super-challenge-display span {
  font-family: "Merriweather", serif;
  font-size: 1.1em;
  font-weight: bold;
  color: var(--health-good);
  display: block;
  margin-top: 8px;
}

/* (Animação de pulso para a borda) */
@keyframes pulse-border {
  from {
    border-color: var(--text-accent);
    box-shadow: 0 0 5px var(--text-accent);
  }
  to {
    border-color: #fff;
    box-shadow: 0 0 15px #fff;
  }
}


/* EFEITO FOLHAS CAINDO */
#leaf-fall-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
  z-index: 0; /* Certifique-se de que este contêiner está no fundo */
}

.falling-leaf {
  position: absolute;
  width: 40px; /* Ajuste o tamanho da imagem da folha */
  height: 40px;
  background-size: contain; /* Garante que a imagem se ajuste ao div */
  background-repeat: no-repeat;
  background-position: center;
  opacity: 0;
  transform: translateY(-100px);
  animation: leafFall linear infinite;
  /* Remover background-color e border-radius daqui */
  /* box-shadow: 0 0 5px rgba(0,0,0,0.3); */ /* Opcional: Mantém a sombra se quiser */
}

/* Em vez de classes para cores, agora para tipos de folha (diferentes imagens) */
.falling-leaf.type-1 {
  background-image: url("../img/leaves/leaf1.png");
  width: 35px;
  height: 35px;
}
.falling-leaf.type-2 {
  background-image: url("../img/leaves/leaf2.png");
  width: 40px;
  height: 40px;
}
.falling-leaf.type-3 {
  background-image: url("../img/leaves/leaf3.png");
  width: 45px;
  height: 45px;
}
/* Adicione mais se tiver mais imagens */

@keyframes leafFall {
  0% {
    opacity: 0;
    transform: translateY(-100px) rotate(0deg) translateX(0px);
  }
  10% {
    opacity: 0.8;
  }
  100% {
    opacity: 0;
    transform: translateY(calc(100vh + 100px)) rotate(720deg) translateX(50px);
  }
}
